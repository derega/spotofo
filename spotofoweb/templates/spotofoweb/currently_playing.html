{% extends "spotofoweb/base.html" %}
{% load i18n %}

{% block "title" %}{% trans "Currently Playing" %}{% endblock %}
{% block "head" %}
<meta http-equiv="refresh" content="30">
<style>
html {
font-size: 200%;
}
</style>
{% endblock %}

{% block "content" %}

<table class="table table-striped table-bordered">
<thead>
<tr>
<th>{% trans "User" %}</th>
<th>{% trans "Track" %}</th>
<th>{% trans "Artist" %}</th>
<th>{% trans "Album" %}</th>
<th></th>
</tr>
</thead>
{% for cp in currently_playing %}
<tr>
<td>{{ cp.ti.username }}</td>
{% if cp.active %}
<td>{{ cp.ti.track }}</td>
<td>{{ cp.ti.artist }}</td>
<td>{{ cp.ti.album }}</td>
{% else %}
<td>-</td>
<td>-</td>
<td>-</td>
{% endif %}
<td style="width: 1em" class="{% if cp.ti.is_playing %}table-success{% else %}table-danger{% endif %}">
{% if cp.active %}<a target="_blank" href="{{ ti.uri }}">{% trans "Open" %}</a>{% else %}-{% endif %}
</td>
</tr>
{% empty %}
<p>{% trans "Nothing playing currently." %}</p>
{% endfor %}

</table>

<ul>
{% for pl in playlists %}
<li><a href="{{ pl.open_url }}" target="_blank">{% trans "Open target playlist" %}</a></li>
{% endfor %}
</ul>

{% endblock %}

